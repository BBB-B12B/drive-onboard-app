(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{1052:(e,t,r)=>{"use strict";r.d(t,{C5:()=>j,MJ:()=>x,eI:()=>f,lR:()=>p,lV:()=>d,zB:()=>u});var s=r(5155),a=r(2115),n=r(2467),l=r(2544),o=r(4269),i=r(6444);let d=l.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(l.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(h),{getFieldState:r,formState:s}=(0,l.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},h=a.createContext({}),f=a.forwardRef((e,t)=>{let{className:r,...n}=e,l=a.useId();return(0,s.jsx)(h.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...n})})});f.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:l}=m();return(0,s.jsx)(i.J,{ref:t,className:(0,o.cn)(n&&"text-destructive",r),htmlFor:l,...a})});p.displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:l,formDescriptionId:o,formMessageId:i}=m();return(0,s.jsx)(n.DX,{ref:t,id:l,"aria-describedby":a?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!a,...r})});x.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=m();return(0,s.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let j=a.forwardRef((e,t)=>{var r;let{className:a,children:n,...l}=e,{error:i,formMessageId:d}=m(),c=i?String(null!=(r=null==i?void 0:i.message)?r:""):n;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",a),...l,children:c}):null});j.displayName="FormMessage"},1186:(e,t,r)=>{"use strict";r.d(t,{bq:()=>m,eb:()=>x,gC:()=>p,l6:()=>c,yv:()=>u});var s=r(5155),a=r(2115),n=r(4729),l=r(9007),o=r(2614),i=r(2251),d=r(4269);let c=n.bL;n.YJ;let u=n.WT,m=a.forwardRef((e,t)=>{let{className:r,children:a,...o}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[a,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=n.wn.displayName;let p=a.forwardRef((e,t)=>{let{className:r,children:a,position:l="popper",...o}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...o,children:[(0,s.jsx)(h,{}),(0,s.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(f,{})]})})});p.displayName=n.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=n.JU.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:a})]})});x.displayName=n.q7.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=n.wv.displayName},2431:(e,t,r)=>{"use strict";r.d(t,{RG:()=>w,bL:()=>T,q7:()=>F});var s=r(2115),a=r(2556),n=r(9118),l=r(4446),o=r(3468),i=r(8946),d=r(8142),c=r(222),u=r(3558),m=r(6218),h=r(5155),f="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[j,v,g]=(0,n.N)(x),[y,w]=(0,o.A)(x,[g]),[b,N]=y(x),C=s.forwardRef((e,t)=>(0,h.jsx)(j.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(j.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(k,{...e,ref:t})})}));C.displayName=x;var k=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:i,currentTabStopId:j,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:N=!1,...C}=e,k=s.useRef(null),S=(0,l.s)(t,k),A=(0,m.jH)(i),[R,T]=(0,u.i)({prop:j,defaultProp:null!=g?g:null,onChange:y,caller:x}),[F,E]=s.useState(!1),M=(0,c.c)(w),D=v(r),P=s.useRef(!1),[O,_]=s.useState(0);return s.useEffect(()=>{let e=k.current;if(e)return e.addEventListener(f,M),()=>e.removeEventListener(f,M)},[M]),(0,h.jsx)(b,{scope:r,orientation:n,dir:A,loop:o,currentTabStopId:R,onItemFocus:s.useCallback(e=>T(e),[T]),onItemShiftTab:s.useCallback(()=>E(!0),[]),onFocusableItemAdd:s.useCallback(()=>_(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>_(e=>e-1),[]),children:(0,h.jsx)(d.sG.div,{tabIndex:F||0===O?-1:0,"data-orientation":n,...C,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,a.mK)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,a.mK)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!F){let t=new CustomEvent(f,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=D().filter(e=>e.focusable);I([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),N)}}P.current=!1}),onBlur:(0,a.mK)(e.onBlur,()=>E(!1))})})}),S="RovingFocusGroupItem",A=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:l=!1,tabStopId:o,children:c,...u}=e,m=(0,i.B)(),f=o||m,p=N(S,r),x=p.currentTabStopId===f,g=v(r),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:b}=p;return s.useEffect(()=>{if(n)return y(),()=>w()},[n,y,w]),(0,h.jsx)(j.ItemSlot,{scope:r,id:f,focusable:n,active:l,children:(0,h.jsx)(d.sG.span,{tabIndex:x?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:(0,a.mK)(e.onMouseDown,e=>{n?p.onItemFocus(f):e.preventDefault()}),onFocus:(0,a.mK)(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:(0,a.mK)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return R[a]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=g().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=p.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>I(r))}}),children:"function"==typeof c?c({isCurrentTabStop:x,hasTabStop:null!=b}):c})})});A.displayName=S;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var T=C,F=A},3263:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3400:(e,t,r)=>{Promise.resolve().then(r.bind(r,5078))},3630:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>i});var s=r(5155),a=r(2115),n=r(2467),l=r(3101),o=r(4269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(i({variant:a,size:l,className:r})),ref:t,...c})});d.displayName="Button"},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(5889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},5078:(e,t,r)=>{"use strict";r.d(t,{UsersClient:()=>F});var s=r(5155),a=r(2115),n=r(2944),l=r(2273),o=r(7270),i=r(3998),d=r(5142),c=r(146);let u=(0,r(4294).A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var m=r(3630),h=r(6259),f=r(1647);function p(e){var t,r,p;let{data:x,onEdit:j,onDelete:v}=e,[g,y]=a.useState([]),[w,b]=a.useState([]),[N,C]=a.useState({}),[k,S]=a.useState({}),A=a.useMemo(()=>(e=>{let{onEdit:t,onDelete:r}=e;return[{accessorKey:"name",header:"ชื่อ-สกุล"},{accessorKey:"email",header:"อีเมล"},{accessorKey:"role",header:"สิทธิ์",cell:e=>{let{row:t}=e,r=t.getValue("role");return(0,s.jsx)(f.E,{variant:"admin"===r?"default":"secondary",children:r})}},{id:"actions",cell:e=>{let{row:a}=e,n=a.original;return(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)(h.rI,{children:[(0,s.jsx)(h.ty,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"เปิดเมนู"}),(0,s.jsx)(c.A,{className:"h-4 w-4"})]})}),(0,s.jsxs)(h.SQ,{align:"end",children:[(0,s.jsx)(h.lp,{children:"Actions"}),(0,s.jsx)(h._2,{onClick:()=>navigator.clipboard.writeText(n.id),children:"คัดลอก ID"}),(0,s.jsxs)(h._2,{onClick:()=>t(n),children:[(0,s.jsx)(u,{className:"mr-2 h-4 w-4"}),"แก้ไขข้อมูล"]}),(0,s.jsxs)(h._2,{className:"text-destructive focus:text-destructive",onClick:()=>r(n),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"ลบผู้ใช้"]})]})]})})}}]})({onEdit:j,onDelete:v}),[j,v]),R=(0,n.N4)({data:x,columns:A,onSortingChange:y,onColumnFiltersChange:b,getCoreRowModel:(0,l.HT)(),getPaginationRowModel:(0,l.kW)(),getSortedRowModel:(0,l.h5)(),getFilteredRowModel:(0,l.hM)(),onColumnVisibilityChange:C,onRowSelectionChange:S,state:{sorting:g,columnFilters:w,columnVisibility:N,rowSelection:k}});return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"flex items-center py-4",children:(0,s.jsx)(d.p,{placeholder:"ค้นหาด้วยอีเมล...",value:null!=(p=null==(t=R.getColumn("email"))?void 0:t.getFilterValue())?p:"",onChange:e=>{var t;return null==(t=R.getColumn("email"))?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:R.getHeaderGroups().map(e=>(0,s.jsx)(o.Hj,{children:e.headers.map(e=>(0,s.jsx)(o.nd,{children:e.isPlaceholder?null:(0,n.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(o.BF,{children:(null==(r=R.getRowModel().rows)?void 0:r.length)?R.getRowModel().rows.map(e=>(0,s.jsx)(o.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(o.nA,{children:(0,n.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(o.Hj,{children:(0,s.jsx)(o.nA,{colSpan:A.length,className:"h-24 text-center",children:"ไม่พบข้อมูล"})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[R.getFilteredSelectedRowModel().rows.length," of"," ",R.getFilteredRowModel().rows.length," row(s) selected."]}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>R.previousPage(),disabled:!R.getCanPreviousPage(),children:"ก่อนหน้า"}),(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>R.nextPage(),disabled:!R.getCanNextPage(),children:"ถัดไป"})]})]})]})}var x=r(2452),j=r(1834),v=r(6942),g=r(2544),y=r(8734),w=r(1052),b=r(1186);let N=y.Ik({name:y.Yj().min(2,{message:"Name must be at least 2 characters."}),email:y.Yj().email({message:"Please enter a valid email address."}),role:y.k5(["admin","employee"]),phone:y.Yj().optional()}),C=N.extend({password:y.Yj().min(6,{message:"Password must be at least 6 characters."})}),k=N.extend({password:y.Yj().min(6,{message:"Password must be at least 6 characters."}).optional().or(y.eu(""))});function S(e){let{user:t,onSubmit:r,isPending:a}=e,n=t?k:C,l=(0,g.mN)({resolver:(0,v.u)(n),defaultValues:{name:(null==t?void 0:t.name)||"",email:(null==t?void 0:t.email)||"",role:(null==t?void 0:t.role)||"employee",phone:(null==t?void 0:t.phone)||"",password:""}});return(0,s.jsx)(w.lV,{...l,children:(0,s.jsxs)("form",{onSubmit:l.handleSubmit(e=>{let t={...e};t.password||delete t.password,r(t)}),className:"space-y-4",children:[(0,s.jsx)(w.zB,{control:l.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"ชื่อ-สกุล"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(d.p,{placeholder:"John Doe",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:l.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"อีเมล"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(d.p,{placeholder:"john.doe@example.com",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:l.control,name:"phone",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"เบอร์โทร"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(d.p,{placeholder:"0812345678",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:l.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"รหัสผ่านใหม่"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(d.p,{type:"password",placeholder:"ปล่อยว่างไว้เพื่อใช้รหัสผ่านเดิม",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(w.zB,{control:l.control,name:"role",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"สิทธิ์"}),(0,s.jsxs)(b.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(b.bq,{children:(0,s.jsx)(b.yv,{placeholder:"เลือกระดับสิทธิ์"})})}),(0,s.jsxs)(b.gC,{children:[(0,s.jsx)(b.eb,{value:"employee",children:"Employee"}),(0,s.jsx)(b.eb,{value:"admin",children:"Admin"})]})]}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsx)(i.$,{type:"submit",disabled:a,children:a?"กำลังบันทึก...":"บันทึก"})]})})}var A=r(5894),R=r(63),I=r(8053),T=r(4269);function F(e){let{data:t}=e,[r,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,f]=(0,a.useTransition)(),{toast:v}=(0,A.dj)(),g=(0,R.useRouter)(),y=async e=>{f(async()=>{try{if(!(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create user");v({title:"สำเร็จ",description:"สมาชิกใหม่ถูกสร้างขึ้นเรียบร้อยแล้ว"}),n(!1),g.refresh()}catch(e){v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถสร้างสมาชิกใหม่ได้",variant:"destructive"})}})},w=async e=>{u&&f(async()=>{try{if(!(await fetch("/api/users/".concat(u.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update user");v({title:"สำเร็จ",description:"ข้อมูลสมาชิกถูกอัปเดตเรียบร้อยแล้ว"}),o(!1),m(null),g.refresh()}catch(e){v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปเดตข้อมูลสมาชิกได้",variant:"destructive"})}})},b=async()=>{u&&f(async()=>{try{if(!(await fetch("/api/users/".concat(u.id),{method:"DELETE"})).ok)throw Error("Failed to delete user");v({title:"สำเร็จ",description:"สมาชิกถูกลบเรียบร้อยแล้ว"}),c(!1),m(null),g.refresh()}catch(e){v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถลบสมาชิกได้",variant:"destructive"})}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"จัดการสมาชิก"}),(0,s.jsxs)(j.lG,{open:r,onOpenChange:n,children:[(0,s.jsx)(j.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"เพิ่มสมาชิกใหม่"]})}),(0,s.jsxs)(j.Cf,{children:[(0,s.jsx)(j.c7,{children:(0,s.jsx)(j.L3,{children:"เพิ่มสมาชิกใหม่"})}),(0,s.jsx)(S,{onSubmit:y,isPending:h})]})]})]}),(0,s.jsx)(p,{data:t,onEdit:e=>{m(e),o(!0)},onDelete:e=>{m(e),c(!0)}}),(0,s.jsx)(j.lG,{open:l,onOpenChange:o,children:(0,s.jsxs)(j.Cf,{children:[(0,s.jsx)(j.c7,{children:(0,s.jsx)(j.L3,{children:"แก้ไขข้อมูลสมาชิก"})}),(0,s.jsx)(S,{user:u,onSubmit:w,isPending:h})]})}),(0,s.jsx)(I.Lt,{open:d,onOpenChange:c,children:(0,s.jsxs)(I.EO,{children:[(0,s.jsxs)(I.wd,{children:[(0,s.jsx)(I.r7,{children:"ยืนยันการลบ"}),(0,s.jsxs)(I.$v,{children:["คุณแน่ใจหรือไม่ว่าต้องการลบผู้ใช้"," ",(0,s.jsx)("span",{className:"font-semibold",children:null==u?void 0:u.name}),"? การกระทำนี้ไม่สามารถย้อนกลับได้"]})]}),(0,s.jsxs)(I.ck,{children:[(0,s.jsx)(I.Zr,{children:"ยกเลิก"}),(0,s.jsx)(I.Rx,{onClick:b,className:(0,T.cn)((0,i.r)({variant:"destructive"})),disabled:h,children:h?"กำลังลบ...":"ลบ"})]})]})})]})}y.Ik({name:y.Yj().min(2),email:y.Yj().email(),role:y.k5(["admin","employee"]),phone:y.Yj().optional(),password:y.Yj().min(6)})},5797:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var s=r(2115);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=[],i={toasts:[]};function d(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),o.forEach(e=>{e(i)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(i);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6444:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(5155),a=r(2115),n=r(2894),l=r(3101),o=r(4269);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,o.cn)(i(),r),...a})});d.displayName=n.b.displayName},6615:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{e.O(0,[432,513,642,502,213,677,214,441,255,358],()=>e(e.s=3400)),_N_E=e.O()}]);