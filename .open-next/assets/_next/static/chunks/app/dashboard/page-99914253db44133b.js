(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{2174:(e,s,a)=>{"use strict";a.d(s,{DashboardTabs:()=>eo});var t=a(5155),l=a(2115),r=a(5667),n=a(4269);let i=r.bL,c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});c.displayName=r.B8.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});d.displayName=r.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});o.displayName=r.UC.displayName;var m=a(6948),u=a(6943),x=a(3556),h=a(8527),j=a(8068),p=a(443);function f(e){let{onStatusSelect:s,selectedStatus:a,applications:l}=e,r=l.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),i=l.length,c=r.pending||0,d=r.approved||0,o=r.rejected||0,f=r.terminated||0,v=[{title:"ใบสมัครทั้งหมด",value:i,icon:u.A,status:"all",color:"text-primary"},{title:"รอตรวจสอบ",value:c,icon:x.A,status:"pending",color:"text-amber-500"},{title:"อนุมัติแล้ว",value:d,icon:h.A,status:"approved",color:"text-success"},{title:"ปฏิเสธ",value:o,icon:j.A,status:"rejected",color:"text-destructive"},{title:"เลิกจ้าง",value:f,icon:p.A,status:"terminated",color:"text-slate-500"}];return(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:v.map(e=>(0,t.jsxs)(m.Zp,{onClick:()=>s(e.status),className:(0,n.cn)("cursor-pointer transition-all hover:shadow-md hover:-translate-y-1",a===e.status&&"ring-2 ring-primary bg-secondary"),children:[(0,t.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(m.ZB,{className:"text-sm font-medium",children:e.title}),(0,t.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})]}),(0,t.jsx)(m.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.value})})]},e.status))})}var v=a(2944),g=a(2273),N=a(6654),y=a(2033),w=a(2251),b=a(146),A=a(3630),C=a(8127),k=a(6615),S=a(2452),M=a(2619),E=a.n(M),R=a(63),H=a(3998),D=a(6259),P=a(5142),U=a(7270),$=a(6333),F=a(276),I=a(1647),_=a(2687),L=a(27),V=a(8053),G=a(5894),T=a(7495);let O={pending:"default",approved:"success",rejected:"destructive",terminated:"secondary"},z={pending:"รอตรวจสอบ",approved:"อนุมัติ",rejected:"ปฏิเสธ",terminated:"เลิกจ้าง"};function B(e){var s,a,r;let{applications:i,onDelete:c,isAdmin:d}=e,[o,m]=l.useState([{id:"createdAt",desc:!0}]),[u,h]=l.useState([]),[f,M]=l.useState({}),[B,K]=l.useState({}),[J,W]=l.useState(),Z=(0,R.useRouter)(),[q,Q]=l.useState(!1),[X,Y]=l.useState(null),{toast:ee}=(0,G.dj)(),[es,ea]=l.useTransition(),[et,el]=l.useState(null),er=(e,s)=>{el(e),ea(async()=>{let a=await (0,T.C)(e,s);a.success?(ee({title:"อัปเดตสถานะสำเร็จ",description:'ใบสมัครถูกเปลี่ยนสถานะเป็น "'.concat(z[s],'"'),variant:"default"}),Z.refresh()):ee({title:"อัปเดตสถานะล้มเหลว",description:a.error,variant:"destructive"}),el(null)})},en=[{accessorKey:"fullName",header:"ผู้สมัคร",cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{children:s.getValue("fullName")})}},{accessorKey:"status",header:"สถานะ",cell:e=>{let{row:s}=e,a=s.getValue("status");return(0,t.jsx)(I.E,{variant:O[a],children:z[a]})}},{accessorKey:"createdAt",header:"วันที่ส่ง",cell:e=>{let{row:s}=e;return(0,t.jsx)("div",{children:(0,_.GP)(new Date(s.getValue("createdAt")),"PPP",{locale:L.th})})}},{id:"actions",enableHiding:!1,cell:e=>{let{row:s}=e,a=s.original,l=!!d,r=es&&et===a.appId,n=a.status;return(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(H.$,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsxs)(E(),{href:"/dashboard/applications/".concat(a.appId),children:[(0,t.jsx)(N.A,{className:"mr-1 h-4 w-4"})," ดูข้อมูล"]})}),l&&"pending"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(H.$,{variant:"success",size:"sm",onClick:()=>er(a.appId,"approved"),disabled:r,children:[r?(0,t.jsx)(y.A,{className:"mr-1 h-4 w-4 animate-spin"}):(0,t.jsx)(w.A,{className:"mr-1 h-4 w-4"}),"อนุมัติ"]}),(0,t.jsxs)(H.$,{variant:"destructive",size:"sm",onClick:()=>er(a.appId,"rejected"),disabled:r,children:[r?(0,t.jsx)(y.A,{className:"mr-1 h-4 w-4 animate-spin"}):(0,t.jsx)(j.A,{className:"mr-1 h-4 w-4"}),"ปฏิเสธ"]})]}),l&&"approved"===n&&(0,t.jsxs)(H.$,{variant:"secondary",size:"sm",onClick:()=>er(a.appId,"terminated"),disabled:r,children:[r?(0,t.jsx)(y.A,{className:"mr-1 h-4 w-4 animate-spin"}):(0,t.jsx)(p.A,{className:"mr-1 h-4 w-4"}),"เลิกจ้าง"]}),l&&(0,t.jsxs)(D.rI,{children:[(0,t.jsx)(D.ty,{asChild:!0,children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 w-8 p-0",disabled:r,children:[(0,t.jsx)("span",{className:"sr-only",children:"เปิดเมนู"}),(0,t.jsx)(b.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(D.SQ,{align:"end",children:[(0,t.jsx)(D.lp,{children:"Actions เพิ่มเติม"}),"pending"!==n&&(0,t.jsxs)(D._2,{onClick:()=>er(a.appId,"pending"),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:'เปลี่ยนเป็น "รอตรวจสอบ"'})]}),"approved"!==n&&"pending"!==n&&(0,t.jsxs)(D._2,{onClick:()=>er(a.appId,"approved"),children:[(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:'เปลี่ยนเป็น "อนุมัติ"'})]}),"rejected"!==n&&"pending"!==n&&(0,t.jsxs)(D._2,{onClick:()=>er(a.appId,"rejected"),children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:'เปลี่ยนเป็น "ปฏิเสธ"'})]}),"terminated"!==n&&"pending"!==n&&(0,t.jsxs)(D._2,{onClick:()=>er(a.appId,"terminated"),children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:'เปลี่ยนเป็น "เลิกจ้าง"'})]}),(0,t.jsx)(D.mB,{}),(0,t.jsxs)(D._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",onClick:()=>{Y(a),Q(!0)},children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"ลบใบสมัคร"})]})]})]})]})}}],ei=(0,v.N4)({data:i,columns:en,onSortingChange:m,onColumnFiltersChange:h,getCoreRowModel:(0,g.HT)(),getPaginationRowModel:(0,g.kW)(),getSortedRowModel:(0,g.h5)(),getFilteredRowModel:(0,g.hM)(),onColumnVisibilityChange:M,onRowSelectionChange:K,state:{sorting:o,columnFilters:u,columnVisibility:f,rowSelection:B}});return l.useEffect(()=>{var e,s;if(null==J?void 0:J.from){let s=J.to?new Date(J.to.setHours(23,59,59,999)):new Date;null==(e=ei.getColumn("createdAt"))||e.setFilterValue([J.from,s])}else null==(s=ei.getColumn("createdAt"))||s.setFilterValue(void 0)},[J,ei]),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center py-4 gap-2",children:[(0,t.jsx)(P.p,{placeholder:"ค้นหาชื่อผู้สมัคร...",value:null!=(r=null==(s=ei.getColumn("fullName"))?void 0:s.getFilterValue())?r:"",onChange:e=>{var s;return null==(s=ei.getColumn("fullName"))?void 0:s.setFilterValue(e.target.value)},className:"max-w-sm"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)($.AM,{children:[(0,t.jsx)($.Wv,{asChild:!0,children:(0,t.jsxs)(H.$,{id:"date",variant:"outline",className:(0,n.cn)("w-[300px] justify-start text-left font-normal",!J&&"text-muted-foreground"),children:[(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4"}),(null==J?void 0:J.from)?J.to?(0,t.jsxs)(t.Fragment,{children:[(0,_.GP)(J.from,"d MMM yyyy",{locale:L.th})," -"," ",(0,_.GP)(J.to,"d MMM yyyy",{locale:L.th})]}):(0,_.GP)(J.from,"d MMM yyyy",{locale:L.th}):(0,t.jsx)("span",{children:"เลือกช่วงวันที่"})]})}),(0,t.jsx)($.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(F.V,{initialFocus:!0,mode:"range",defaultMonth:null==J?void 0:J.from,selected:J,onSelect:W,numberOfMonths:2,locale:L.th})})]}),J&&(0,t.jsx)(H.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 text-muted-foreground hover:text-foreground",onClick:()=>W(void 0),children:(0,t.jsx)(k.A,{className:"h-4 w-4"})})]}),d&&(0,t.jsx)(H.$,{asChild:!0,className:"ml-auto",children:(0,t.jsxs)(E(),{href:"/apply",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"สร้างใบสมัครใหม่"]})})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(U.XI,{children:[(0,t.jsx)(U.A0,{children:ei.getHeaderGroups().map(e=>(0,t.jsx)(U.Hj,{children:e.headers.map(e=>(0,t.jsx)(U.nd,{children:e.isPlaceholder?null:(0,v.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(U.BF,{children:(null==(a=ei.getRowModel().rows)?void 0:a.length)?ei.getRowModel().rows.map(e=>(0,t.jsx)(U.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(U.nA,{children:(0,v.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(U.Hj,{children:(0,t.jsx)(U.nA,{colSpan:en.length,className:"h-24 text-center",children:"ไม่พบข้อมูล"})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,t.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:["แสดง ",ei.getRowModel().rows.length," จาก ",i.length," รายการ"]}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)(H.$,{variant:"outline",size:"sm",onClick:()=>ei.previousPage(),disabled:!ei.getCanPreviousPage(),children:"ก่อนหน้า"}),(0,t.jsx)(H.$,{variant:"outline",size:"sm",onClick:()=>ei.nextPage(),disabled:!ei.getCanNextPage(),children:"ถัดไป"})]})]}),(0,t.jsx)(V.Lt,{open:q,onOpenChange:Q,children:(0,t.jsxs)(V.EO,{children:[(0,t.jsxs)(V.wd,{children:[(0,t.jsx)(V.r7,{children:"ยืนยันการลบใบสมัคร"}),(0,t.jsxs)(V.$v,{children:["คุณแน่ใจหรือไม่ว่าต้องการลบใบสมัครของ"," ",(0,t.jsx)("span",{className:"font-semibold",children:null==X?void 0:X.fullName}),"? การกระทำนี้ไม่สามารถย้อนกลับได้ (ในตอนนี้จะเป็นการลบจากหน้าจอเท่านั้น)"]})]}),(0,t.jsxs)(V.ck,{children:[(0,t.jsx)(V.Zr,{children:"ยกเลิก"}),(0,t.jsx)(V.Rx,{onClick:()=>{X&&(c(X.appId),Q(!1),Y(null))},className:(0,n.cn)((0,H.r)({variant:"destructive"})),children:"ยืนยันการลบ"})]})]})})]})}function K(e){let{initialApplications:s,userRole:a,userEmail:r}=e,[n,i]=(0,l.useState)("all"),{toast:c}=(0,G.dj)(),d="admin"===a,o=(0,l.useMemo)(()=>d?s:s.filter(e=>{var s;return e.appId===r||e.fullName.toLowerCase().includes((null==(s=(null!=r?r:"").split("@")[0])?void 0:s.toLowerCase())||"")}),[s,d,r]),m=(0,l.useMemo)(()=>"all"===n?o:o.filter(e=>e.status===n),[o,n]),u=async e=>{console.log("TODO: Implement deletion for ".concat(e)),c({title:"ยังไม่รองรับการลบ",description:"ฟังก์ชันการลบข้อมูลยังไม่ถูกสร้างขึ้น",variant:"destructive"})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{onStatusSelect:e=>{i(e)},selectedStatus:n,applications:o}),(0,t.jsx)(B,{applications:m,isAdmin:d,onDelete:u})]})}var J=a(9056),W=a(984),Z=a(8770),q=a(5866),Q=a(3489),X=a(2240),Y=a(1165),ee=a(43),es=a(350),ea=a(7974),et=a(6444),el=a(1186),er=a(243),en=a(1834),ei=a(9999);let ec=e=>Array.isArray(e)?e:[];function ed(e){var s;let{initialDate:a,initialStartDate:r,initialEndDate:n,initialRows:i,userEmail:c,userRole:d}=e,o=(0,_.GP)(new Date,"yyyy-MM-dd"),m="admin"===d,[u,x]=(0,l.useState)(ec(i)),[h,j]=(0,l.useState)((null!=r?r:a)>o?o:null!=r?r:a),[p,f]=(0,l.useState)((null!=n?n:a)>o?o:null!=n?n:a),[v,g]=(0,l.useState)(!1),[N,w]=(0,l.useState)("all"),[b,A]=(0,l.useState)(""),[k,S]=(0,l.useState)(""),[M,E]=(0,l.useState)(50),[R,D]=(0,l.useState)({key:"date",direction:"desc"}),$=(0,l.useRef)(null),[F,L]=(0,l.useState)(null),{toast:V}=(0,G.dj)();(0,l.useEffect)(()=>{let e=setTimeout(()=>{S(b),E(50)},400);return()=>clearTimeout(e)},[b]),(0,l.useEffect)(()=>{E(50)},[N,h,p,R]),(0,l.useEffect)(()=>{x(ec(i))},[i]),(0,l.useEffect)(()=>{h&&p&&T({start:h,end:p})},[h,p,c,d]);let T=async e=>{let{start:s,end:a}=e;try{g(!0);let e=new URLSearchParams(m?{startDate:s,endDate:a}:{email:null!=c?c:"",startDate:s,endDate:a}),t="/api/daily-reports/summary?".concat(e.toString()),l=await fetch(t,{cache:"no-store"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||"ไม่สามารถโหลดข้อมูลได้")}let r=await l.json();x(ec(r))}catch(e){console.error("[DailyReportTracker] summary fetch error",e),V({variant:"destructive",title:"โหลดข้อมูลสรุปไม่สำเร็จ",description:e instanceof Error?e.message:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ"})}finally{g(!1)}},O=async(e,s)=>{let a=e>o?o:e,t="start"===s?a:h,l="end"===s?a:p;if("start"===s?j(t):f(l),!t||!l)return void x([]);await T({start:t,end:l})},z=e=>{D(s=>({key:e,direction:s.key===e&&"asc"===s.direction?"desc":"asc"}))},B=(0,l.useMemo)(()=>{let e=k.trim().toLowerCase(),s=u.filter(e=>{switch(N){case"uploaded":return e.uploadedCount>0;case"partial":return"partial"===e.status;case"missing":return"missing"===e.status;case"complete":return"complete"===e.status;default:return!0}}).filter(s=>{var a;return!e||s.fullName.toLowerCase().includes(e)||(null!=(a=s.email)?a:"").toLowerCase().includes(e)});return s.sort((e,s)=>{let a=0;switch(R.key){case"date":a=(0,J.H)(e.date).getTime()-(0,J.H)(s.date).getTime();break;case"name":a=e.fullName.localeCompare(s.fullName);break;case"uploaded":a=e.uploadedCount-s.uploadedCount;break;case"status":a=e.status.localeCompare(s.status);break;case"lastUpdated":a=(e.lastUpdated?(0,J.H)(e.lastUpdated).getTime():0)-(s.lastUpdated?(0,J.H)(s.lastUpdated).getTime():0);break;default:a=0}return"asc"===R.direction?a:-a}),s},[u,N,k,R]),K=(0,l.useMemo)(()=>B.slice(0,M),[B,M]);return(0,l.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&M<B.length&&E(e=>Math.min(e+50,B.length))},{threshold:.1}),s=$.current;return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[M,B.length]),(0,t.jsxs)("section",{className:"space-y-4 rounded-lg border bg-card p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end",children:[(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)(et.J,{htmlFor:"daily-report-summary-start",children:"วันที่เริ่ม"}),(0,t.jsx)(P.p,{id:"daily-report-summary-start",type:"date",value:h,onChange:e=>void O(e.target.value,"start"),className:"max-w-xs",max:o})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)(et.J,{htmlFor:"daily-report-summary-end",children:"วันที่สิ้นสุด"}),(0,t.jsx)(P.p,{id:"daily-report-summary-end",type:"date",value:p,onChange:e=>void O(e.target.value,"end"),className:"max-w-xs",max:o})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)(et.J,{children:"กรองสถานะ"}),(0,t.jsxs)(el.l6,{value:N,onValueChange:e=>w(e),children:[(0,t.jsx)(el.bq,{className:"max-w-xs",children:(0,t.jsx)(el.yv,{placeholder:"เลือกตัวกรอง"})}),(0,t.jsxs)(el.gC,{children:[(0,t.jsx)(el.eb,{value:"all",children:"ทั้งหมด"}),(0,t.jsx)(el.eb,{value:"uploaded",children:"แนบแล้ว"}),(0,t.jsx)(el.eb,{value:"partial",children:"แนบแล้วยังไม่ครบ"}),(0,t.jsx)(el.eb,{value:"missing",children:"ยังไม่มีข้อมูล"}),(0,t.jsx)(el.eb,{value:"complete",children:"ครบแล้ว"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsxs)(H.$,{type:"button",variant:"outline",onClick:()=>h&&p&&void T({start:h,end:p}),disabled:v||!h||!p,children:[v?(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"รีเฟรช"]}),(0,t.jsxs)(H.$,{type:"button",variant:"default",onClick:()=>{if(0===B.length)return;let e=new Blob(["\uFEFF"+["Date,Name,Email,Uploaded,Total,Status,Last Updated,Notes",...B.map(e=>['"'.concat(e.date,'"'),'"'.concat(e.fullName.replace(/"/g,'""'),'"'),'"'.concat(e.email||"",'"'),e.uploadedCount,e.totalSlots,e.status,'"'.concat(e.lastUpdated?(0,_.GP)((0,J.H)(e.lastUpdated),"yyyy-MM-dd HH:mm"):"",'"'),'"'.concat((e.notes||"").replace(/"/g,'""'),'"')].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.setAttribute("download","daily_report_".concat(h,"_to_").concat(p,".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)},disabled:v||0===B.length,children:[(0,t.jsx)(Q.A,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),m&&(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)(et.J,{htmlFor:"daily-report-name-filter",children:"กรองชื่อ/อีเมล"}),(0,t.jsx)(P.p,{id:"daily-report-name-filter",placeholder:"ค้นหาชื่อหรืออีเมล",value:b,onChange:e=>A(e.target.value),className:"max-w-xs"})]})]}),(0,t.jsxs)("div",{className:"rounded-md border h-[600px] overflow-y-auto relative",children:[(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)(U.A0,{className:"sticky top-0 z-20 shadow-sm",children:(0,t.jsxs)(U.Hj,{className:"bg-secondary hover:bg-secondary",children:[(0,t.jsx)(U.nd,{className:"w-[160px] font-semibold text-secondary-foreground",children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 -ml-3 hover:bg-transparent hover:text-secondary-foreground",onClick:()=>z("date"),children:[(0,t.jsx)("span",{children:"วันที่"}),"date"===R.key?"asc"===R.direction?(0,t.jsx)(X.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(ee.A,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(U.nd,{className:"font-semibold text-secondary-foreground",children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 -ml-3 hover:bg-transparent hover:text-secondary-foreground",onClick:()=>z("name"),children:[(0,t.jsx)("span",{children:"ชื่อ-นามสกุล"}),"name"===R.key?"asc"===R.direction?(0,t.jsx)(X.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(ee.A,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(U.nd,{className:"w-[140px] text-center font-semibold text-secondary-foreground",children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 hover:bg-transparent hover:text-secondary-foreground",onClick:()=>z("uploaded"),children:[(0,t.jsx)("span",{children:"จำนวนรูป"}),"uploaded"===R.key?"asc"===R.direction?(0,t.jsx)(X.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(ee.A,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(U.nd,{className:"w-[140px] text-center font-semibold text-secondary-foreground",children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 hover:bg-transparent hover:text-secondary-foreground",onClick:()=>z("status"),children:[(0,t.jsx)("span",{children:"สถานะ"}),"status"===R.key?"asc"===R.direction?(0,t.jsx)(X.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(ee.A,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(U.nd,{className:"w-[200px] font-semibold text-secondary-foreground",children:(0,t.jsxs)(H.$,{variant:"ghost",className:"h-8 -ml-3 hover:bg-transparent hover:text-secondary-foreground",onClick:()=>z("lastUpdated"),children:[(0,t.jsx)("span",{children:"อัปเดตล่าสุด"}),"lastUpdated"===R.key?"asc"===R.direction?(0,t.jsx)(X.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.A,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(ee.A,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(U.nd,{className:"font-semibold text-secondary-foreground",children:"หมายเหตุ"}),(0,t.jsx)(U.nd,{className:"w-[140px] text-center font-semibold text-secondary-foreground",children:"ติดต่อ"})]})}),(0,t.jsx)(U.BF,{children:v?Array.from({length:6}).map((e,s)=>(0,t.jsxs)(U.Hj,{children:[(0,t.jsx)(U.nA,{children:(0,t.jsx)(er.E,{className:"h-4 w-24"})}),(0,t.jsx)(U.nA,{children:(0,t.jsx)(er.E,{className:"h-4 w-48"})}),(0,t.jsx)(U.nA,{className:"text-center",children:(0,t.jsx)(er.E,{className:"mx-auto h-4 w-16"})}),(0,t.jsx)(U.nA,{className:"text-center",children:(0,t.jsx)(er.E,{className:"mx-auto h-4 w-20"})}),(0,t.jsx)(U.nA,{children:(0,t.jsx)(er.E,{className:"h-4 w-40"})}),(0,t.jsx)(U.nA,{children:(0,t.jsx)(er.E,{className:"h-4 w-32"})}),(0,t.jsx)(U.nA,{className:"text-center",children:(0,t.jsx)(er.E,{className:"mx-auto h-9 w-24"})})]},"skeleton-".concat(s))):K.length>0?K.map((e,s)=>{var a,l;return(0,t.jsxs)(U.Hj,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:s=>{s.target.closest("button")||L(e)},children:[(0,t.jsx)(U.nA,{children:(0,_.GP)((0,J.H)(e.date),"dd MMM yyyy")}),(0,t.jsx)(U.nA,{children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.fullName}),e.email&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.email})]})}),(0,t.jsxs)(U.nA,{className:"text-center font-medium text-foreground",children:[e.uploadedCount,"/",e.totalSlots]}),(0,t.jsx)(U.nA,{className:"text-center",children:(e=>{switch(e.status){case"complete":return(0,t.jsxs)(I.E,{variant:"default",className:"bg-emerald-500 hover:bg-emerald-500",children:[(0,t.jsx)(W.A,{className:"mr-1 h-3.5 w-3.5"}),"ครบแล้ว"]});case"partial":return(0,t.jsxs)(I.E,{variant:"secondary",children:[(0,t.jsx)(C.A,{className:"mr-1 h-3.5 w-3.5"}),"ยังไม่ครบ"]});default:return(0,t.jsxs)(I.E,{variant:"destructive",children:[(0,t.jsx)(Z.A,{className:"mr-1 h-3.5 w-3.5"}),"ยังไม่มีข้อมูล"]})}})(e)}),(0,t.jsx)(U.nA,{children:e.lastUpdated?(0,_.GP)((0,J.H)(e.lastUpdated),"dd MMM yyyy HH:mm"):"—"}),(0,t.jsx)(U.nA,{className:"text-sm text-muted-foreground",children:null!=(a=e.notes)?a:e.uploadedCount===e.totalSlots?"ครบถ้วน":0===e.uploadedCount?"ยังไม่มีการอัปโหลด":"ยังอัปโหลดไม่ครบ"}),(0,t.jsx)(U.nA,{className:"text-center",children:(0,t.jsxs)(en.lG,{children:[(0,t.jsx)(en.zM,{asChild:!0,children:(0,t.jsx)(H.$,{variant:"outline",size:"sm",children:"ข้อมูลติดต่อ"})}),(0,t.jsxs)(en.Cf,{children:[(0,t.jsxs)(en.c7,{children:[(0,t.jsx)(en.L3,{children:"ข้อมูลติดต่อ"}),(0,t.jsxs)(en.rr,{children:["รายละเอียดการติดต่อของ ",e.fullName]})]}),(0,t.jsxs)("div",{className:"space-y-3 py-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(es.A,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"เบอร์โทร"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.phone&&e.phone.trim().length>0?e.phone:"ไม่มีข้อมูล"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(ea.A,{className:"h-4 w-4 text-muted-foreground mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"อีเมล"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:null!=(l=e.email)?l:"ไม่มีข้อมูล"})]})]})]}),(0,t.jsx)(en.Es,{children:(0,t.jsx)(en.HM,{asChild:!0,children:(0,t.jsx)(H.$,{type:"button",variant:"secondary",children:"ปิดหน้าต่าง"})})})]})]})})]},"".concat(e.appId,"-").concat(e.date,"-").concat(s))}):(0,t.jsx)(U.Hj,{children:(0,t.jsx)(U.nA,{colSpan:7,className:"py-6 text-center text-muted-foreground",children:"ไม่มีข้อมูลสำหรับวันที่เลือก"})})})]}),(0,t.jsx)("div",{ref:$,className:"h-4 w-full"})]}),(0,t.jsx)(en.lG,{open:!!F,onOpenChange:e=>!e&&L(null),children:(0,t.jsxs)(en.Cf,{className:"max-w-4xl h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(en.c7,{children:[(0,t.jsxs)(en.L3,{children:["รายงานประจำวัน: ",F?(0,_.GP)((0,J.H)(F.date),"dd MMM yyyy"):""]}),(0,t.jsxs)(en.rr,{children:["ของ ",null==F?void 0:F.fullName," (",null==F?void 0:F.email,")"]})]}),F&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(ei.j,{overrideDate:(0,J.H)(F.date),overrideEmail:null!=(s=F.email)?s:void 0,className:"w-full",onUpdate:()=>{h&&p&&T({start:h,end:p})}})})]})})]})}function eo(e){let{initialApplications:s,initialDailyReportDate:a,initialStartDate:l,initialEndDate:r,initialDailyReportSummary:n,userEmail:m,userRole:u}=e;return(0,t.jsxs)(i,{defaultValue:"applications",className:"space-y-6",children:[(0,t.jsxs)(c,{className:"w-full justify-start overflow-x-auto",children:[(0,t.jsx)(d,{value:"applications",children:"ข้อมูลใบสมัคร"}),(0,t.jsx)(d,{value:"daily-report",children:"Daily Report"})]}),(0,t.jsx)(o,{value:"applications",className:"space-y-6",children:(0,t.jsx)(K,{initialApplications:s,userRole:u,userEmail:m})}),(0,t.jsx)(o,{value:"daily-report",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold tracking-tight text-foreground",children:"Daily Report Overview"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"ตรวจสอบความคืบหน้าการแนบรูปประจำวันของพนักงานทั้งหมด"})]}),(0,t.jsx)(ed,{initialDate:a,initialStartDate:l,initialEndDate:r,initialRows:n,userEmail:m,userRole:u})]})})]})}},7277:(e,s,a)=>{Promise.resolve().then(a.bind(a,2174))},7495:(e,s,a)=>{"use strict";a.d(s,{C:()=>l});var t=a(926);let l=(0,t.createServerReference)("60c9ad97a538d2ee39e3346ce6fc37d364fb582be5",t.callServer,void 0,t.findSourceMapURL,"updateApplicationStatus")}},e=>{e.O(0,[6432,2513,6642,5502,6489,389,4912,2677,176,1088,9999,2214,8441,1255,7358],()=>e(e.s=7277)),_N_E=e.O()}]);