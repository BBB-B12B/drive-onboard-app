(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{125:(e,r,t)=>{"use strict";var n=t(2115),a="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},s=n.useState,o=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function u(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!a(e,t)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),n=s({inst:{value:t,getSnapshot:r}}),a=n[0].inst,d=n[1];return i(function(){a.value=t,a.getSnapshot=r,u(a)&&d({inst:a})},[e,t,r]),o(function(){return u(a)&&d({inst:a}),e(function(){u(a)&&d({inst:a})})},[e]),l(t),t};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},222:(e,r,t)=>{"use strict";t.d(r,{c:()=>a});var n=t(2115);function a(e){let r=n.useRef(e);return n.useEffect(()=>{r.current=e}),n.useMemo(()=>(...e)=>r.current?.(...e),[])}},1289:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var n=t(4227),a=t(2115);let s=()=>{let e=(0,a.useContext)(n.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2318:(e,r,t)=>{"use strict";t.d(r,{g:()=>o});var n=t(5155);let a=(0,t(4294).A)("CarFront",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);var s=t(4269);function o(e){let{className:r}=e;return(0,n.jsxs)("div",{className:(0,s.cn)("flex items-center gap-2",r),children:[(0,n.jsx)("div",{className:"bg-primary text-primary-foreground p-2 rounded-md",children:(0,n.jsx)(a,{className:"h-6 w-6"})}),(0,n.jsx)("span",{className:"text-xl font-semibold font-headline text-foreground",children:"DriveOnboard"})]})}},2757:(e,r,t)=>{Promise.resolve().then(t.bind(t,4227)),Promise.resolve().then(t.bind(t,4185))},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>u,r:()=>l});var n=t(5155),a=t(2115),s=t(2467),o=t(3101),i=t(4269);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:u=!1,...d}=e,c=u?s.DX:"button";return(0,n.jsx)(c,{className:(0,i.cn)(l({variant:a,size:o,className:t})),ref:r,...d})});u.displayName="Button"},4129:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});var n=t(2115),a=globalThis?.document?n.useLayoutEffect:()=>{}},4185:(e,r,t)=>{"use strict";t.d(r,{Header:()=>z});var n=t(5155),a=t(63),s=t(2619),o=t.n(s),i=t(2115),l=t(2318),u=t(1289),d=t(3998),c=t(4294);let f=(0,c.A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),m=(0,c.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),h=(0,c.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var v=t(222),x=t(4129);t(7650);var p=t(2467),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,p.TL)(`Primitive.${r}`),a=i.forwardRef((e,a)=>{let{asChild:s,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?t:r,{...o,ref:a})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{}),y=t(4806);function b(){return()=>{}}var N="Avatar",[w,j]=function(e,r=[]){let t=[],a=()=>{let r=t.map(e=>i.createContext(e));return function(t){let n=t?.[e]||r;return i.useMemo(()=>({[`__scope${e}`]:{...t,[e]:n}}),[t,n])}};return a.scopeName=e,[function(r,a){let s=i.createContext(a);s.displayName=r+"Context";let o=t.length;t=[...t,a];let l=r=>{let{scope:t,children:a,...l}=r,u=t?.[e]?.[o]||s,d=i.useMemo(()=>l,Object.values(l));return(0,n.jsx)(u.Provider,{value:d,children:a})};return l.displayName=r+"Provider",[l,function(t,n){let l=n?.[e]?.[o]||s,u=i.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=t.reduce((r,{useScope:t,scopeName:n})=>{let a=t(e)[`__scope${n}`];return{...r,...a}},{});return i.useMemo(()=>({[`__scope${r.scopeName}`]:n}),[n])}};return t.scopeName=r.scopeName,t}(a,...r)]}(N),[k,S]=w(N),E=i.forwardRef((e,r)=>{let{__scopeAvatar:t,...a}=e,[s,o]=i.useState("idle");return(0,n.jsx)(k,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:(0,n.jsx)(g.span,{...a,ref:r})})});E.displayName=N;var C="AvatarImage",A=i.forwardRef((e,r)=>{let{__scopeAvatar:t,src:a,onLoadingStatusChange:s=()=>{},...o}=e,l=S(C,t),u=function(e,r){let{referrerPolicy:t,crossOrigin:n}=r,a=(0,y.useSyncExternalStore)(b,()=>!0,()=>!1),s=i.useRef(null),o=a?(s.current||(s.current=new window.Image),s.current):null,[l,u]=i.useState(()=>P(o,e));return(0,x.N)(()=>{u(P(o,e))},[o,e]),(0,x.N)(()=>{let e=e=>()=>{u(e)};if(!o)return;let r=e("loaded"),a=e("error");return o.addEventListener("load",r),o.addEventListener("error",a),t&&(o.referrerPolicy=t),"string"==typeof n&&(o.crossOrigin=n),()=>{o.removeEventListener("load",r),o.removeEventListener("error",a)}},[o,n,t]),l}(a,o),d=(0,v.c)(e=>{s(e),l.onImageLoadingStatusChange(e)});return(0,x.N)(()=>{"idle"!==u&&d(u)},[u,d]),"loaded"===u?(0,n.jsx)(g.img,{...o,ref:r,src:a}):null});A.displayName=C;var L="AvatarFallback",M=i.forwardRef((e,r)=>{let{__scopeAvatar:t,delayMs:a,...s}=e,o=S(L,t),[l,u]=i.useState(void 0===a);return i.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(e)}},[a]),l&&"loaded"!==o.imageLoadingStatus?(0,n.jsx)(g.span,{...s,ref:r}):null});function P(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}M.displayName=L;var _=t(4269);let R=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(E,{ref:r,className:(0,_.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});R.displayName=E.displayName;let $=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(A,{ref:r,className:(0,_.cn)("aspect-square h-full w-full",t),...a})});$.displayName=A.displayName;let O=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(M,{ref:r,className:(0,_.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});function z(){let e=(0,a.usePathname)(),{user:r,logout:t}=(0,u.A)(),s=i.useMemo(()=>{let e=[{href:"/dashboard",label:"Dashboard"},{href:"/dashboard/daily-report",label:"Daily Report"}];return(null==r?void 0:r.role)==="admin"&&e.push({href:"/dashboard/users",label:"Users"}),e},[null==r?void 0:r.role]);return(0,n.jsxs)("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background/80 backdrop-blur-sm px-4 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(l.g,{}),(0,n.jsx)("nav",{className:"hidden md:flex items-center gap-1",children:s.map(r=>(0,n.jsx)(o(),{href:r.href,className:(0,_.cn)("rounded-md px-3 py-2 text-sm font-medium transition-colors",e===r.href?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:r.label},r.href))})]}),(0,n.jsx)("div",{className:"ml-auto flex items-center gap-4",children:r?(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)(R,{className:"h-9 w-9",children:[(0,n.jsx)($,{src:r.avatarUrl,alt:r.name}),(0,n.jsx)(O,{children:(0,n.jsx)(f,{})})]}),(0,n.jsxs)("div",{className:"flex flex-col text-sm overflow-hidden",children:[(0,n.jsx)("span",{className:"font-semibold text-foreground truncate",children:r.name}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:r.email}),(0,n.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,n.jsx)(m,{className:"h-3 w-3"}),"admin"===r.role?"ผู้ดูแลระบบ":"พนักงาน"]})]}),(0,n.jsx)(d.$,{variant:"ghost",size:"icon",onClick:t,className:"ml-auto h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"ออกจากระบบ",children:(0,n.jsx)(h,{className:"h-4 w-4"})})]}):(0,n.jsx)(d.$,{asChild:!0,variant:"outline",size:"sm",children:(0,n.jsx)(o(),{href:"/login",children:"เข้าสู่ระบบ"})})})]})}O.displayName=M.displayName},4227:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>i,c:()=>o});var n=t(5155),a=t(2115),s=t(6489);let o=(0,a.createContext)(void 0);function i(e){let{children:r}=e,{data:t,status:a}=(0,s.useSession)(),i="loading"===a,l=null==t?void 0:t.user;return i?(0,n.jsx)("div",{className:"flex items-center justify-center h-screen w-full",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"})}):(0,n.jsx)(o.Provider,{value:{user:l,login:()=>{(0,s.signIn)()},logout:()=>{(0,s.signOut)({callbackUrl:"/login"})},loading:i},children:r})}},4269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var n=t(2821),a=t(5889);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,n.$)(r))}},4806:(e,r,t)=>{"use strict";e.exports=t(125)}},e=>{e.O(0,[432,489,176,441,255,358],()=>e(e.s=2757)),_N_E=e.O()}]);